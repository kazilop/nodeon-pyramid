# üöÄ NodeOn Pyramid - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ /root/nodeon

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–∞–ø–∫–∏ /root/nodeon –Ω–∞ Timeweb VPS

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@147.45.110.220
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
```bash
# –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
mkdir -p /root/nodeon

# –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ (—Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã)
scp nodeon-pyramid-timeweb.tar.gz root@147.45.110.220:/root/

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –≤ –Ω–∞—à—É –ø–∞–ø–∫—É
cd /root/nodeon
tar -xzf /root/nodeon-pyramid-timeweb.tar.gz
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
chmod +x timeweb-deploy.sh
./timeweb-deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–ø–∫–∏ –≤ `/root/nodeon`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Node.js 18.x, PM2, Nginx, Certbot
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç firewall

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
nano /root/nodeon/.env
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `.env`:
```env
NODE_ENV=production
PORT=3000

SUPABASE_URL=https://ahxwpzgltlzlvrtrbanm.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFoeHdwemdsdGx6bHZydHJiYW1tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1MDMxNDksImV4cCI6MjA3NTA3OTE0OX0.h4sMVhVwvRUiHgbevDgv9W1G2S__uDWPUSCiXdrEy4E

TELEGRAM_BOT_TOKEN=7670372637:AAG7XWbNkhvNx_M4MI4118AYXvIsn3bRMDQ
TELEGRAM_BOT_USERNAME=pro_stars_bot

SECRET_KEY=your_secret_key_here
DEVELOPER_TELEGRAM_ID=207940967
```

### 5. –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```bash
certbot --nginx -d sistemypro.ru -d www.sistemypro.ru
```

### 6. –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
systemctl restart nginx
pm2 restart nodeon-pyramid
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
- **https://sistemypro.ru**
- **https://www.sistemypro.ru**

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 status

# –°—Ç–∞—Ç—É—Å Nginx
systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:3000/health
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs nodeon-pyramid

# –õ–æ–≥–∏ Nginx
tail -f /var/log/nginx/error.log
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
cd /root/nodeon
./update.sh
```

## üìÅ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
/root/nodeon/                     # –ù–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ server.js                     # Express —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3000)
‚îú‚îÄ‚îÄ public/index.html             # –§—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ routes/                       # API endpoints
‚îú‚îÄ‚îÄ .env                          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ timeweb-deploy.sh            # –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ logs/                         # –õ–æ–≥–∏

/etc/nginx/sites-available/       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
‚îî‚îÄ‚îÄ nodeon                        # –ù–∞—à —Å–∞–π—Ç

/etc/nginx/sites-enabled/         # –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∞–π—Ç—ã
‚îî‚îÄ‚îÄ nodeon -> ../sites-available/nodeon
```

## üåê –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Nginx** (–ø–æ—Ä—Ç 80/443) ‚Üí –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ `/root/nodeon/public/`
2. **API –∑–∞–ø—Ä–æ—Å—ã** (`/api/*`) ‚Üí –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ Express —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3000)
3. **Express —Å–µ—Ä–≤–µ—Ä** ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç API –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Supabase
4. **PM2** ‚Üí —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º Express
5. **SSL** ‚Üí –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç HTTPS –¥–ª—è Telegram Mini App

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ü–∞–ø–∫–∞ –≤ /root** - —É–¥–æ–±–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å–µ–≥–æ
- ‚úÖ **–ì–æ—Ç–æ–≤–æ –¥–ª—è Timeweb** - –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è VPS
- ‚úÖ **–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ª—É–∂–±** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - PM2 + Nginx

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–î–æ–º–µ–Ω** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ IP `147.45.110.220`
2. **–ü–æ—Ä—Ç 3000** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω
3. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è Telegram Mini App
4. **Firewall** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø–æ—Ä—Ç–æ–≤ 22, 80, 443

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ NodeOn Pyramid –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –ø–∞–ø–∫–µ `/root/nodeon` –Ω–∞ Timeweb VPS!
