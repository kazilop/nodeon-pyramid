# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ NodeOn Pyramid –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä 147.45.110.220

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

```bash
# –°–æ–∑–¥–∞–µ–º –∞—Ä—Ö–∏–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
cd server-deployment
tar -czf ../nodeon-pyramid-server.tar.gz .
cd ..
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@147.45.110.220

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–∏ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
mkdir -p /var/www/nodeon-pyramid

# –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ (—Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã)
scp nodeon-pyramid-server.tar.gz root@147.45.110.220:/var/www/

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É
cd /var/www/nodeon-pyramid
tar -xzf ../nodeon-pyramid-server.tar.gz
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
cd /var/www/nodeon-pyramid
chmod +x deploy.sh
./deploy.sh
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
nano .env
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
```env
NODE_ENV=production
PORT=3000

SUPABASE_URL=https://ahxwpzgltlzlvrtrbanm.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFoeHdwemdsdGx6bHZydHJiYW1tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1MDMxNDksImV4cCI6MjA3NTA3OTE0OX0.h4sMVhVwvRUiHgbevDgv9W1G2S__uDWPUSCiXdrEy4E

TELEGRAM_BOT_TOKEN=7670372637:AAG7XWbNkhvNx_M4MI4118AYXvIsn3bRMDQ
TELEGRAM_BOT_USERNAME=pro_stars_bot

SECRET_KEY=your_secret_key_here
DEVELOPER_TELEGRAM_ID=207940967
```

### 5. –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
certbot --nginx -d sistemypro.ru -d www.sistemypro.ru
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
systemctl restart nginx
pm2 restart nodeon-pyramid
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
- **https://sistemypro.ru**
- **https://www.sistemypro.ru**

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 status

# –°—Ç–∞—Ç—É—Å Nginx
systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:3000/health
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs nodeon-pyramid

# –õ–æ–≥–∏ Nginx
tail -f /var/log/nginx/error.log
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
cd /var/www/nodeon-pyramid
./update.sh
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```
/var/www/nodeon-pyramid/          # –û–¢–î–ï–õ–¨–ù–ê–Ø –ü–ê–ü–ö–ê –î–õ–Ø –ù–ê–®–ï–ì–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
‚îú‚îÄ‚îÄ server.js                     # Express —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ package.json                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ ecosystem.config.js           # PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ nginx-site.conf              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
‚îú‚îÄ‚îÄ .env                         # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ routes/                      # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ public/                      # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (index.html)
‚îú‚îÄ‚îÄ locales/                     # –ü–µ—Ä–µ–≤–æ–¥—ã
‚îî‚îÄ‚îÄ logs/                        # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## üåê –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Nginx** —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 80/443 –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ `/var/www/nodeon-pyramid/public/`
2. **API –∑–∞–ø—Ä–æ—Å—ã** (`/api/*`) –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ Express —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3000)
3. **Express —Å–µ—Ä–≤–µ—Ä** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç API –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Supabase
4. **PM2** —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º Express —Å–µ—Ä–≤–µ—Ä–∞
5. **SSL** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–∏

- ‚úÖ –ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ —Å–∞–π—Ç–∞–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –õ–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü–æ—Ä—Ç 3000** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω —Å–≤–æ–±–æ–¥–µ–Ω
2. **–î–æ–º–µ–Ω** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞
3. **SSL** - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è Telegram Mini App
4. **Firewall** - –ø–æ—Ä—Ç—ã 80, 443, 22 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã
