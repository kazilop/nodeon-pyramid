# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï WEBAPP_INVOICEURL_INVALID

## üêõ –ü–†–û–ë–õ–ï–ú–ê:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É `webAppInvoiceUrlInvalid` –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ NDN –∑–∞ Stars

## üîç –ü–†–ò–ß–ò–ù–ê:
Telegram Bot API –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Stars. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ:
1. –°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º (–±–µ–∑ –¥–µ—Å—è—Ç–∫–æ–≤)
2. –§–æ—Ä–º–∞—Ç –æ–±—ä–µ–∫—Ç–∞ invoice –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Telegram

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—É–º–º–∞ –≤ invoice (payments.js):**
```javascript
// –ë–´–õ–û:
amount: amount_ndn * 100  // –°—É–º–º–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö

// –°–¢–ê–õ–û:
amount: Math.round(amount_ndn)  // –¶–µ–ª–æ–µ —á–∏—Å–ª–æ –≤ Stars
```

### **2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è invoice (index.html):**
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `tg.openInvoice`
- –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ `telegram.WebApp.openInvoice`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (15000ms)

### **3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**

**payments.js:**
- –°—É–º–º–∞ —Ç–µ–ø–µ—Ä—å –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏

**index.html:**
- –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ API (—Å–Ω–∞—á–∞–ª–∞ `tg`, –ø–æ—Ç–æ–º `telegram`)
- –î–æ–±–∞–≤–ª–µ–Ω try-catch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –£–ª—É—á—à–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–æ–ª—å—à–µ)

## üì§ –ó–ê–ì–†–£–ñ–ï–ù–û –ù–ê –°–ï–†–í–ï–†:

- ‚úÖ `server-deployment/routes/payments.js` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å—É–º–º–∞
- ‚úÖ `server-deployment/public/index.html` - –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ PM2 –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- ‚úÖ Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢:

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ NDN –∑–∞ Stars:
1. –°—É–º–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è
2. Invoice –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. –û—à–∏–±–∫–∞ `webAppInvoiceUrlInvalid` –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–æ–ª—å—à–µ

## üß™ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ:

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–∫—É–ø–∫—É NDN –∑–∞ Stars.











