# üöÄ NodeOn Pyramid - –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## ‚úÖ –î–∞, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

–°–æ–∑–¥–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ **–æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```
/var/www/nodeon-pyramid/          # –û–¢–î–ï–õ–¨–ù–ê–Ø –ü–ê–ü–ö–ê
‚îú‚îÄ‚îÄ server.js                     # Express —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3000)
‚îú‚îÄ‚îÄ public/index.html             # –§—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ routes/                       # API endpoints
‚îú‚îÄ‚îÄ nginx-site.conf              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
‚îî‚îÄ‚îÄ ...
```

## üåê –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Nginx** (–ø–æ—Ä—Ç 80/443) ‚Üí –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
2. **API –∑–∞–ø—Ä–æ—Å—ã** (`/api/*`) ‚Üí –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ Express (–ø–æ—Ä—Ç 3000)
3. **Express —Å–µ—Ä–≤–µ—Ä** ‚Üí –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç API –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Supabase
4. **PM2** ‚Üí —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º Express

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh root@147.45.110.220

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏
mkdir -p /var/www/nodeon-pyramid

# –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ (—Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã)
scp nodeon-pyramid-server-updated.tar.gz root@147.45.110.220:/var/www/

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞
cd /var/www/nodeon-pyramid
tar -xzf ../nodeon-pyramid-server-updated.tar.gz
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
chmod +x deploy.sh
./deploy.sh
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL
```bash
certbot --nginx -d sistemypro.ru -d www.sistemypro.ru
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
systemctl restart nginx
pm2 restart nodeon-pyramid
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- **https://sistemypro.ru** - –≤–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- **https://sistemypro.ru/api/** - API endpoints
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ Supabase
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–ª—É–∂–± –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–û—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–∫–∞** - –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ —Å–∞–π—Ç–∞–º–∏
- ‚úÖ **–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ª—É–∂–±** - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **–õ–µ–≥–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–ª—É–∂–±—ã

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –°—Ç–∞—Ç—É—Å
pm2 status
systemctl status nginx

# –õ–æ–≥–∏
pm2 logs nodeon-pyramid
tail -f /var/log/nginx/error.log

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
cd /var/www/nodeon-pyramid
./update.sh
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–ª–∏—á–Ω–æ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ! 

**–§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:**
- `nodeon-pyramid-server-updated.tar.gz` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤
- `DEPLOY_TO_SERVER.md` - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
