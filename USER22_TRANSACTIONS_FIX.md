# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID=22

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID=22 (Sydex, @sydex) –∫—É–ø–∏–ª 2 NDN –∑–∞ 2 Stars, –Ω–æ:
- –ë–∞–ª–∞–Ω—Å –≤ –±–∞–∑–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è
- Wallet —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å
- –í –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ Stars

## –ê–Ω–∞–ª–∏–∑

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID=22
- **Telegram ID:** 283842919
- **Username:** @sydex
- **Name:** Sydex
- **Balance:** 100.0 NDN
- **Pro Status:** ‚úÖ
- **Database ID:** 22

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### 1. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. **ID: 120** - `buy_ndn_for_stars`
   - NDN: 1.0
   - Stars: 1.0
   - –î–∞—Ç–∞: 2025-10-27T21:11:10

2. **ID: 117** - `pro_purchase`
   - NDN: -1000.0
   - –î–∞—Ç–∞: 2025-10-27T21:09:03

3. **ID: 116** - `transfer_received`
   - NDN: 1000.0
   - –û–ø–∏—Å–∞–Ω–∏–µ: Transfer from NobodyYety
   - –î–∞—Ç–∞: 2025-10-27T21:06:05

4. **ID: 114** - `buy_ndn_for_stars`
   - NDN: 1.0
   - Stars: 1.0
   - –î–∞—Ç–∞: 2025-10-27T21:04:54

#### 2. Wallet —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–¥–æ–±–∞–≤–ª–µ–Ω—ã)
1. **ID: 3** - `stars_purchase`
   - Stars: 1.0
   - NDN: 1.0
   - –î–∞—Ç–∞: 2025-10-27T21:29:13

2. **ID: 2** - `stars_purchase`
   - Stars: 1.0
   - NDN: 1.0
   - –î–∞—Ç–∞: 2025-10-27T21:29:13

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
**–§–∞–π–ª:** `server-deployment/webhook.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–µ `last_stars_deposit_date` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `nodeon_users`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –ë—ã–ª–æ
.update({
  balance_ndn: newBalance,
  last_stars_deposit_date: new Date().toISOString(), // ‚ùå –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  updated_at: new Date().toISOString()
})

// –°—Ç–∞–ª–æ
.update({
  balance_ndn: newBalance,
  updated_at: new Date().toISOString() // ‚úÖ –£–±—Ä–∞–ª–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ
})
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã wallet —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
**–§–∞–π–ª:** `fix_user22_transactions.py`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID=22
- –ù–∞–π–¥–µ–Ω–æ 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ `buy_ndn_for_stars`
- –î–æ–±–∞–≤–ª–µ–Ω—ã 2 wallet —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —É—á–µ—Ç–∞ Stars –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –±–∞–ª–∞–Ω—Å **100.0 NDN**, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –ü–æ–ª—É—á–∏–ª 1000 NDN –æ—Ç Fish (ID=5)
- –ö—É–ø–∏–ª Pro —Å—Ç–∞—Ç—É—Å –∑–∞ 1000 NDN
- –ö—É–ø–∏–ª 2 NDN –∑–∞ 2 Stars (–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç–æ–ª—å–∫–æ 1 NDN –æ—Ç–º–µ—á–µ–Ω–æ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö)

## –õ–æ–≥–∏ webhook

```
üí≥ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º successful_payment: { userId: 283842919, payment: 'ndn_283842919_1_120' }
üìã –†–∞–∑–±–∏—Ä–∞–µ–º payload: { parts: [ 'ndn', '283842919', '1', '120' ], length: 4 }
üì§ –ó–∞—á–∏—Å–ª—è–µ–º NDN: { telegram_id: 283842919, amount_ndn: 1 }
```

**–í—ã–≤–æ–¥:** Webhook –æ–±—Ä–∞–±–æ—Ç–∞–ª —Ç–æ–ª—å–∫–æ 1 –ø–ª–∞—Ç–µ–∂ –Ω–∞ 1 NDN, –∞ –Ω–µ 2.

## –í—ã–≤–æ–¥—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –ë–î
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `nodeon_transactions`
- ‚úÖ Wallet —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—é—Ç—Å—è

### –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `last_stars_deposit_date` –≤ –ë–î
- ‚ö†Ô∏è –ù–µ –≤—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (—Ç–æ–ª—å–∫–æ 1 –∏–∑ 2)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤ –ë–î:**
   ```sql
   ALTER TABLE nodeon_users 
   ADD COLUMN last_stars_deposit_date TIMESTAMP;
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ frontend** –¥–ª—è –≤—Ç–æ—Ä–æ–π –ø–æ–∫—É–ø–∫–∏

3. **–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ webhook —Ä–∞–±–æ—Ç–∞–µ—Ç** –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID=22 –ø–æ–ª—É—á–∏–ª 100.0 NDN
‚úÖ –°–æ–∑–¥–∞–Ω–æ 4 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ `nodeon_transactions`
‚úÖ –°–æ–∑–¥–∞–Ω–æ 2 wallet —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚úÖ –ë–∞–ª–∞–Ω—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
‚úÖ Stars —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `last_stars_deposit_date` –≤ –ë–î
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á–µ–º—É –≤—Ç–æ—Ä–∞—è –ø–æ–∫—É–ø–∫–∞ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∞—Å—å
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è webhook'–æ–º











