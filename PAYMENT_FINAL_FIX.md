# ‚úÖ –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–õ–ê–¢–ï–ñ–ï–ô

## üéØ –ü–†–û–ë–õ–ï–ú–ê:
–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂ –∑–∞–≤–∏—Å–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –º–µ–Ω—é

## üîç –ê–ù–ê–õ–ò–ó:

–ò–∑ –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ:
1. ‚úÖ Invoice —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
2. ‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ invoice –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
3. ‚ùå Callback –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

### **1. Backend (payments.js):**
–¢–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è **–æ–±—ä–µ–∫—Ç invoice**, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∞:
```javascript
res.json({
  success: true,
  transaction_id: transaction.id,
  invoice: {
    title: `–ü–æ–∫—É–ø–∫–∞ ${amount_ndn} NDN`,
    description: description,
    photo_url: 'https://sistemypro.ru/favicon.ico',
    currency: 'XTR',
    prices: [
      { label: `${amount_ndn} NDN`, amount: Math.round(amount_ndn) }
    ]
  },
  invoice_url: invoiceResponse.data.result,
  stars_amount: Math.round(amount_ndn)
});
```

### **2. Frontend (index.html):**
–¢–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç –∏–ª–∏ —Å—Å—ã–ª–∫–∞:
```javascript
const invoiceData = result.invoice || result.invoice_url;
console.log('Invoice data:', invoiceData);

tg.openInvoice(invoiceData, async (status) => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
});
```

### **3. –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- `console.log('üí≥ –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞:', status)`
- `console.log('‚úÖ –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–µ–Ω, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ...')`
- `console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:', confirmData)`
- `console.log('üì• –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', confirmResponse.status)`
- `console.log('üì• –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:', confirmResult)`

## üì§ –ó–ê–ì–†–£–ñ–ï–ù–û –ù–ê –°–ï–†–í–ï–†:

- ‚úÖ `server-deployment/routes/payments.js` - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç invoice
- ‚úÖ `server-deployment/public/index.html` - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É
- ‚úÖ PM2 –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- ‚úÖ Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ:
1. –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ DevTools (F12) ‚Üí Console
2. –ü–æ–∫—É–ø–∞–π—Ç–µ NDN –∑–∞ Stars
3. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

**–û–∂–∏–¥–∞–µ—Ç—Å—è —É–≤–∏–¥–µ—Ç—å:**
- `Invoice data: ...` - –î–∞–Ω–Ω—ã–µ invoice
- `üí≥ –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞: ...` - –°—Ç–∞—Ç—É—Å –æ—Ç Telegram
- `üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:` - –î–∞–Ω–Ω—ã–µ –¥–ª—è confirm-payment
- `üì• –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: 200` - –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
- `üì• –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: ...` - –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞—á–∏—Å–ª–µ–Ω–∏—è

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢:

–¢–µ–ø–µ—Ä—å:
1. ‚úÖ Invoice –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ä–µ–∫—Ç
2. ‚úÖ Frontend –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. ‚úÖ Callback –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º!











