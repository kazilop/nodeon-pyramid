<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ Miner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-section {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border-color: #bee5eb;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ Miner</h1>
    
    <div class="test-section">
        <h2>üîß –¢–µ—Å—Ç—ã</h2>
        <button class="test-button" onclick="testMinerAPI()">–¢–µ—Å—Ç API –º–∞–π–Ω–µ—Ä–∞</button>
        <button class="test-button" onclick="testMinerInitialization()">–¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∞–π–Ω–µ—Ä–∞</button>
        <button class="test-button" onclick="testMinerTabSwitch()">–¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É</button>
    </div>
    
    <div class="test-section">
        <h2>üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤</h2>
        <div id="testResults"></div>
    </div>

    <script>
        const testResults = document.getElementById('testResults');
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞
        function addTestResult(testName, success, message, data = null) {
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${success ? 'success' : 'error'}`;
            
            let content = `${success ? '‚úÖ' : '‚ùå'} ${testName}\n`;
            content += `–°–æ–æ–±—â–µ–Ω–∏–µ: ${message}\n`;
            if (data) {
                content += `–î–∞–Ω–Ω—ã–µ: ${JSON.stringify(data, null, 2)}\n`;
            }
            content += `–í—Ä–µ–º—è: ${new Date().toLocaleTimeString()}\n`;
            
            resultDiv.textContent = content;
            testResults.appendChild(resultDiv);
            testResults.scrollTop = testResults.scrollHeight;
        }
        
        // –¢–µ—Å—Ç API –º–∞–π–Ω–µ—Ä–∞
        async function testMinerAPI() {
            try {
                const response = await fetch('/api/miner/data/207940967');
                const data = await response.json();
                
                if (data.success) {
                    addTestResult('API –º–∞–π–Ω–µ—Ä–∞', true, 'API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', {
                        gas: data.miner.gas,
                        energy: data.miner.energy,
                        farms: data.miner.total_farms
                    });
                } else {
                    addTestResult('API –º–∞–π–Ω–µ—Ä–∞', false, data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
                }
            } catch (error) {
                addTestResult('API –º–∞–π–Ω–µ—Ä–∞', false, `–û—à–∏–±–∫–∞: ${error.message}`);
            }
        }
        
        // –¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∞–π–Ω–µ—Ä–∞ (—Å–∏–º—É–ª—è—Ü–∏—è)
        async function testMinerInitialization() {
            try {
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
                const testResponse = await fetch('/api/miner/data/207940967');
                if (!testResponse.ok) {
                    addTestResult('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–π–Ω–µ—Ä–∞', false, `–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: ${testResponse.status}`);
                    return;
                }
                
                const data = await testResponse.json();
                if (data.success) {
                    addTestResult('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–π–Ω–µ—Ä–∞', true, '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ', {
                        message: '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç',
                        minerData: data.miner
                    });
                } else {
                    addTestResult('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–π–Ω–µ—Ä–∞', false, data.error || '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö');
                }
            } catch (error) {
                addTestResult('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–π–Ω–µ—Ä–∞', false, `–û—à–∏–±–∫–∞: ${error.message}`);
            }
        }
        
        // –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É (—Å–∏–º—É–ª—è—Ü–∏—è)
        function testMinerTabSwitch() {
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
                const minerTab = document.getElementById('minerTab');
                if (!minerTab) {
                    addTestResult('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É', false, '–í–∫–ª–∞–¥–∫–∞ –º–∞–π–Ω–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ DOM');
                    return;
                }
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
                minerTab.style.display = 'block';
                
                addTestResult('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É', true, '–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –º–∞–π–Ω–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç', {
                    message: '–í–∫–ª–∞–¥–∫–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞',
                    tabExists: true
                });
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä—ã—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                minerTab.style.display = 'none';
                
            } catch (error) {
                addTestResult('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É', false, `–û—à–∏–±–∫–∞: ${error.message}`);
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç API –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            addTestResult('–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã', true, '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
            testMinerAPI();
        });
    </script>
</body>
</html>












