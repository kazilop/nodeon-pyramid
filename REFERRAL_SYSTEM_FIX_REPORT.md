# üéØ –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã NodeOn Crypto

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

#### 1. **–§–æ—Ä–º–∞—Ç referral_link –≤ –ë–î**
- ‚úÖ **–ë—ã–ª–æ**: `https://t.me/pro_stars_bot?startapp=ref_5`
- ‚úÖ **–°—Ç–∞–ª–æ**: `ref_5`
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

#### 2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**
- ‚úÖ **–õ–æ–≥–∏–∫–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π URL –∫ `ref_ID`
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç**: `ref_5` ‚Üí `https://t.me/pro_stars_bot?startapp=ref_5`
- ‚úÖ **Fallback**: –ï—Å–ª–∏ –Ω–µ—Ç —Å—Å—ã–ª–∫–∏, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### 3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º**
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: `referral_path` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π
- ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞**: –†–µ—Ñ–µ—Ä–∞–ª—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ `referral_level`
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ü–æ–¥—Å—á–µ—Ç –ø–æ —É—Ä–æ–≤–Ω—è–º –∏ –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

#### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID 5 (Fish):**
```json
{
  "referral_link": "ref_5",
  "referralsByLevel": {
    "1": [5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ 1-–≥–æ —É—Ä–æ–≤–Ω—è],
    "2": [1 —Ä–µ—Ñ–µ—Ä–∞–ª 2-–≥–æ —É—Ä–æ–≤–Ω—è]
  },
  "stats": {
    "total_referrals": 6,
    "total_earnings": 950,
    "levels_count": 2,
    "pro_referrals": 5
  }
}
```

#### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ referral_path:**
- **1-–π —É—Ä–æ–≤–µ–Ω—å**: `"5,17"`, `"5,14"`, `"5,7"`, `"5,4"`, `"5,3"`
- **2-–π —É—Ä–æ–≤–µ–Ω—å**: `"5,4,16"` (—Ä–µ—Ñ–µ—Ä–∞–ª —Ä–µ—Ñ–µ—Ä–∞–ª–∞)

### üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. **–í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è**: `ref_5`
2. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç**: `https://t.me/pro_stars_bot?startapp=ref_5`
3. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤**: –ü–æ `referral_path LIKE '5%'`
4. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞**: –ü–æ `referral_level` (1, 2, 3...)
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ü–æ–¥—Å—á–µ—Ç –ø–æ —É—Ä–æ–≤–Ω—è–º –∏ PRO —Å—Ç–∞—Ç—É—Å—É

### üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

1. **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–æ—Ç–∞ –∏–ª–∏ –¥–æ–º–µ–Ω
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –±–æ—Ç–æ–≤
4. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
5. **–û—Ç–ª–∞–¥–∫–∞**: –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### üì± –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```javascript
// –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞
referralLink = userData.referral_link; // –ü–æ–ª–Ω—ã–π URL

// –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞  
referralLink = `https://t.me/pro_stars_bot?startapp=${userData.referral_link}`;
// userData.referral_link = "ref_5" ‚Üí "https://t.me/pro_stars_bot?startapp=ref_5"
```

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```sql
-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Å—ã–ª–æ–∫
UPDATE nodeon_users 
SET referral_link = CONCAT('ref_', id)
WHERE referral_link LIKE 'https://t.me/%';

-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–±–Ω–æ–≤–ª–µ–Ω–æ
```

### üöÄ API –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```javascript
// –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ /api/referrals/by-id/:id
{
  "success": true,
  "referrals": [...],           // –í—Å–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã
  "referralsByLevel": {         // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º
    "1": [...],                 // 1-–π —É—Ä–æ–≤–µ–Ω—å
    "2": [...]                  // 2-–π —É—Ä–æ–≤–µ–Ω—å
  },
  "stats": {
    "total_referrals": 6,
    "total_earnings": 950,
    "levels_count": 2,
    "pro_referrals": 5
  }
}
```

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:**

‚úÖ **–ë–î**: –•—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ `ref_ID`  
‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π URL  
‚úÖ **–£—Ä–æ–≤–Ω–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `referral_path` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏  
‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º  
‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**











